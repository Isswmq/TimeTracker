# Тестовое задание Java trainee Krainet

## Описание проекта

Реализовать api приложения тайм-трекера (система для фиксирования времени, затраченного на работу) на языке Java.

### Основные возможности:
- Миграция базы данных: Управление изменениями структуры данных с помощью Liquibase.
- Авторизация и безопасность: Защита API с использованием Spring Security и JWT для авторизации запросов.
- Управление ролями: Реализация различных ролей в Spring Security (например, User может отслеживать время, а Admin управляет проектами и задачами).
- Сборка с Maven: Легкая сборка приложения с использованием Maven.
- Развёртывание с Docker: Упрощённое развёртывание API и базы данных с помощью Docker и Docker Compose.

## Требования

Для запуска проекта вам понадобятся:
- **Java 17**
- **Docker** (для контейнеризации)
- **Docker Compose** (для управления несколькими контейнерами)

## Запуск проекта

### Шаг 1: Сборка проекта
Для сборки проекта используйте Maven:

```bash
mvn package
```
Это действие скомпилирует проект, и создаст исполняемый JAR-файл. Maven также автоматически загрузит все необходимые зависимости.

### Шаг 2: Сборка Docker-образа
После сборки проекта, вам необходимо создать Docker-образ приложения. Для этого выполните следующую команду:

```bash
docker build -t tracker-app .
```
Эта команда создаст Docker-образ вашего Spring Boot приложения, которое затем будет использоваться для запуска в контейнере.

### Шаг 3: Запуск проекта с помощью Docker Compose
После того как образ будет успешно создан, запустите проект с помощью Docker Compose:

```bash
docker-compose up -d
```
Команда docker-compose up -d запустит все необходимые сервисы в фоновом режиме:

# Шаг 5: Использование API

## Аутентификация

- `POST /api/v1/auth/register` - Регистрация пользователя
- `POST /api/v1/auth/authenticate` - Аутентификация пользователя
- `POST /api/v1/auth/refresh` - Обновление токена
- `POST /api/v1/auth/logout` - Выход пользователя

## Проекты

- `POST /api/v1/projects/create` - Создание проекта
- `PUT /api/v1/projects/update/{id}` - Обновление проекта

## Задачи

- `POST /api/v1/tasks/create` - Создание задачи
- `PUT /api/v1/tasks/update/{id}` - Обновление задачи

## Сессии задач

- `POST /api/v1/tasks/sessions/start` - Начало сессии для задачи
- `POST /api/v1/tasks/sessions/pause/{sessionId}` - Пауза сессии
- `POST /api/v1/tasks/sessions/resume/{sessionId}` - Возобновление сессии
- `POST /api/v1/tasks/sessions/end/{sessionId}` - Завершение сессии
- `GET /api/v1/tasks/sessions/task/{taskId}` - Получение сессий по задаче
- `GET /api/v1/tasks/sessions/user/{userId}` - Получение сессий по пользователю

## Пользователи

- `GET /api/v1/users/{userId}/tasks/{taskId}/time-spent` - Получение времени, затраченного пользователем на задачу
- `GET /api/v1/users/{userId}/total-time` - Получение общего времени, затраченного пользователем на все задачи
# Начальная настройка

## При старте приложения автоматически создаются два пользователя:

- **Admin**:
  - Email: `admin@gmail.com`
  - Имя пользователя: `admin`
  - Пароль: `Admin123`
  - Роль: `ADMIN`

- **User**:
  - Email: `user@gmail.com`
  - Имя пользователя: `user`
  - Пароль: `User123`
  - Роль: `USER`

Эти пользователи могут быть использованы для входа в систему и работы с приложением.
